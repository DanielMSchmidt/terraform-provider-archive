---
page_title: "archive_file Data Source - terraform-provider-archive"
subcategory: ""
description: |-
  
---

# archive_file (Data Source)



## Example Usage

```terraform
# Archive a single file.

data "archive_file" "init" {
  type        = "zip"
  source_file = "${path.module}/init.tpl"
  output_path = "${path.module}/files/init.zip"
}
```

```terraform
# Archive multiple files and exclude file.

data "archive_file" "dotfiles" {
  type        = "zip"
  output_path = "${path.module}/files/dotfiles.zip"
  excludes    = ["${path.module}/unwanted.zip"]

  source {
    content  = data.template_file.vimrc.rendered
    filename = ".vimrc"
  }

  source {
    content  = data.template_file.ssh_config.rendered
    filename = ".ssh/config"
  }
}
```

```terraform
# Archive a file to be used with Lambda using consistent file mode

data "archive_file" "lambda_my_function" {
  type             = "zip"
  source_file      = "${path.module}/../lambda/my-function/index.js"
  output_file_mode = "0666"
  output_path      = "${path.module}/files/lambda-my-function.js.zip"
}
```

~> **Note regarding symbolic links**: Due to a bug, the `archive_file` data
  source does not currently create proper zip archives when the source includes
  symbolic links (also known as "symlinks"). Please see [GitHub Issue
  #6](https://github.com/terraform-providers/terraform-provider-archive/issues/6)
  for more details and workaround options. This message will be removed when the
  bug is fixed.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `output_path` (String) The output of the archive file.
- `type` (String) The type of archive to generate. NOTE: `zip` is supported.

### Optional

- `excludes` (Set of String) Specify files to ignore when reading the `source_dir`.
- `output_file_mode` (String) String that specifies the octal file mode for all archived files. For example: `"0666"`. Setting this will ensure that cross platform usage of this module will not vary the modes of archived files (and ultimately checksums) resulting in more deterministic behavior.
- `source` (Block Set) Specifies attributes of a single source file to include into the archive. (see [below for nested schema](#nestedblock--source))
- `source_content` (String) Add only this content to the archive with `source_content_filename` as the filename.
- `source_content_filename` (String) Set this as the filename when using `source_content`.
- `source_dir` (String) Package entire contents of this directory into the archive.
- `source_file` (String) Package this file into the archive.

### Read-Only

- `id` (String) The sha1 checksum hash of the output.
- `output_base64sha256` (String) The base64-encoded SHA256 checksum of output archive file.
- `output_md5` (String) The MD5 checksum of output archive file.
- `output_sha` (String) The SHA1 checksum of output archive file.
- `output_size` (Number) The byte size of the output archive file.

<a id="nestedblock--source"></a>
### Nested Schema for `source`

Required:

- `content` (String) Add this content to the archive with `filename` as the filename.
- `filename` (String) Set this as the filename when declaring a `source`.
